<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE us-patent-application SYSTEM "us-patent-application-v42-2006-08-23.dtd" [ ]>
<us-patent-application lang="EN" dtd-version="v4.2 2006-08-23" file="US20070005712A1-20070104.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20061221" date-publ="20070104">
<us-bibliographic-data-application lang="EN" country="US">
<publication-reference>
<document-id>
<country>US</country>
<doc-number>20070005712</doc-number>
<kind>A1</kind>
<date>20070104</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11229606</doc-number>
<date>20050920</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="regional">
<country>EP</country>
<doc-number>05 014 194.4</doc-number>
<date>20050629</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20070104</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709206000</main-classification>
<further-classification>714032000</further-classification>
<further-classification>717102000</further-classification>
<further-classification>717115000</further-classification>
</classification-national>
<invention-title id="d0e153">Service error handling in a communications network</invention-title>
<parties>
<applicants>
<applicant sequence="00" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Tiainen</last-name>
<first-name>Vesa</first-name>
<address>
<city>Vantaa</city>
<country>FI</country>
</address>
</addressbook>
<nationality>
<country>FI</country>
</nationality>
<residence>
<country>FI</country>
</residence>
</applicant>
</applicants>
<correspondence-address>
<addressbook>
<name>SQUIRE, SANDERS &#x26; DEMPSEY L.L.P.</name>
<address>
<address-1>14TH FLOOR</address-1>
<address-2>8000 TOWERS CRESCENT</address-2>
<city>TYSONS CORNER</city>
<state>VA</state>
<postcode>22182</postcode>
<country>US</country>
</address>
</addressbook>
</correspondence-address>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Nokia Corporation</orgname>
<role>03</role>
<address>
<city>Espoo</city>
<country>FI</country>
</address>
</addressbook>
</assignee>
</assignees>
</us-bibliographic-data-application>
<abstract id="abstract">
<p id="p-0001" num="0000">Control device behavior in error situations where an error response is received from an application is improved. In case a response message received from an application for a communication request is evaluated as an error message by the control device, control of the communication request can be continued on the basis of service-specific data. </p>
</abstract>
<drawings id="DRAWINGS">
<figure id="figure-D00000" num="00000">
<img id="EMI-D00000" he="80.26mm" wi="147.95mm" file="US20070005712A1-20070104-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00001" num="00001">
<img id="EMI-D00001" he="204.47mm" wi="145.71mm" orientation="landscape" file="US20070005712A1-20070104-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00002" num="00002">
<img id="EMI-D00002" he="189.57mm" wi="173.14mm" orientation="landscape" file="US20070005712A1-20070104-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00003" num="00003">
<img id="EMI-D00003" he="213.61mm" wi="180.76mm" orientation="landscape" file="US20070005712A1-20070104-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00004" num="00004">
<img id="EMI-D00004" he="171.28mm" wi="170.94mm" orientation="landscape" file="US20070005712A1-20070104-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00005" num="00005">
<img id="EMI-D00005" he="192.53mm" wi="160.70mm" orientation="landscape" file="US20070005712A1-20070104-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00006" num="00006">
<img id="EMI-D00006" he="232.92mm" wi="183.30mm" orientation="landscape" file="US20070005712A1-20070104-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?summary-of-invention description="Summary of Invention" end="lead"?>
<heading level="2" id="h-0001">FIELD OF THE INVENTION </heading>
<p id="p-0002" num="0001"> The present invention relates to service error handling in a communications network. In particular, the invention relates to processing error responses received by a control entity. </p>
<heading level="2" id="h-0002">BACKGROUND OF THE INVENTION </heading>
<p id="p-0003" num="0002"> <figref idref="DRAWINGS">FIG. 1</figref> shows a basic architecture of an Internet Protocol (IP) Multimedia Subsystem (IMS). </p>
<p id="p-0004" num="0003"> Devices allowing end users to access network services are called User Equipments (UE). UEs access the IMS network to be able to use services provided by the IMS network. UEs communicate with the IMS network by attaching to a packet switched (PS) network, such as General Packet Radio Service (GPRS) network. The UE may access the IMS network over a radio access network (RAN) or over a fixed line access network, such as Digital Subscriber Line (DSL) access. </p>
<p id="p-0005" num="0004"> The IMS network comprises Session Initiation Protocol (SIP) proxies which process SIP signaling. SIP is an application-layer control protocol for creating, modifying, and terminating sessions with one or more participants. SIP proxies in the IMS network are called Call State Control Functions (CSCF) and the main features of the CSCF are to perform session control functions, service control functions and address translation functions. Depending on the functionality the CSCF provides, it is called Proxy-CSCF (P-CSCF), Interrogating-CSCF (I-CSCF) or Serving-CSCF (S-CSCF). </p>
<p id="p-0006" num="0005"> For a UE the P-CSCF (not shown) is the first contact point in the IMS network. When the UE registers to the IMS network, a P-CSCF is allocated to the UE. The same P-CSCF remains allocated to the UE during the lifetime of the registration, and all signaling between the UE and the IMS network traverses the P-CSCF. The I-CSCF (not shown) is located at the edge of the administrative (operator) domain, in signaling path between the P-CSCF and the S-CSCF. The I-CSCF routes received requests to a correct destination, typically to an S-CSCF. The S-CSCF implements the session control in the IMS network and acts as SIP registrar. All SIP signaling initiated by or destined to a certain UE traverses the S-CSCF assigned to serve the UE. </p>
<p id="p-0007" num="0006"> A Home Subscriber Server (HSS) or User Mobility Server (UMS) stores all the user related subscription data, such as location information, security information and user profile information defining the services that the user is subscribed to. Subscription data is created into the HSS when an end user obtains an IMS subscription from an IMS service provider. The subscription data is associated with an IMS private user identity (IMPI) of the user. The HSS also maintains information about the S-CSCF allocated to the user. During an IMS registration procedure, the I-CSCF may contact the HSS in order to find out the address of the allocated S-CSCF based on the IMS public user identity (IMPU) and IMS private user identity (IMPI) of the user sending the registration request. Once the correct S-CSCF has been reached, the S-CSCF contacts the HSS over Cx interface to download user profile information that includes a service profile for the user. </p>
<p id="p-0008" num="0007"> Application Servers (AS) may be part of the IMS network or alternatively are so-called third party ASs located outside the IMS network. ASs host and execute services using SIP and may have an interface, called Sh interface, to the HSS to retrieve user specific data needed in service execution. The S-CSCF may forward a SIP request to an AS over an IMS Service Control (ISC) interface. The S-CSCF obtains information about ASs from the above mentioned service profile included in the user profile downloaded from the HSS. </p>
<p id="p-0009" num="0008"> For establishing a session between an inviting UE and an invited UE, an S-CSCF forwards SIP requests towards the invited UE, possible after first giving the session control to an AS for executing a service and after the AS has given the session control back to the S-CSCF. Instead of the invited UE, the request could be terminated to an AS, for example to a voice mail server. </p>
<p id="p-0010" num="0009"> <figref idref="DRAWINGS">FIG. 2</figref> shows a structure of Filter Criteria that is basically a data structure including user specific service information from which an S-CSCF is able determine when an AS is to be contacted for providing a service to the user. User profiles are stored, in the HSS, per Private User Identity (IMPI) and each user profile may comprise several service profiles associated with a Public User Identity (IMPU). Filter Criteria are included in the service profile of the user profile downloaded from the HSS to the S-CSCF during the IMS registration procedure. </p>
<p id="p-0011" num="0010"> Filter Criteria include a priority field. If the service profile comprises more than one Filter Criteria, the S-CSCF assesses Filter Criteria according to the priority of each Filter Criteria (highest priority is taken first). A Trigger Point comprises one or more service trigger points which define the exact conditions of which have to be fulfilled in order to start a service and a certain AS is to be contacted. Examples of service trigger points are the presence of a specific SIP method (INVITE, OPTIONS, SUBSCRIBE, . . . ), partial or full match on the content of any SIP header or SDP line, presence or absence of any SIP header, and content of Request-URI. </p>
<p id="p-0012" num="0011"> Filter criteria further include the address of an AS (SIP URI) to be contacted if a service is to be started based on fulfilled conditions of one of the service point triggers. A Default Handling parameter of Filter Criteria defines the action to be taken if the AS to be contacted is not available, i.e. cannot be reached. The possible actions in this case are abort or continue the processing of the SIP request. Finally, Filter Criteria could include service information, which is transparent service related information that an S-CSCF may forward to an AS when contacting the AS. </p>
<p id="p-0013" num="0012"> As described above, it may happen that an S-CSCF is not able to contact an AS which is defined in the Filter Criteria to provide the service in question. Possible reasons for unavailability of the AS are, for example, some very fatal problem in the AS or an error in ISC interface configuration. The S-CSCF must then proceed according to Default Handling instructions in the Filter Criteria. However, even if the S-CSCF is able to contact the AS, further problems may occur relating to service execution in the AS. For example, the AS is not necessarily able to provide the service based on the information received from S-CSCF or an AS internal error may occur during the service execution. In these cases, the AS responds to the S-CSCF with a SIP response code indicating that an error has occurred and possible more detailed information about the nature or type of the error. The above mentioned Default Handling parameter neither is examined nor used in these cases, since the AS was actually contacted successfully and the problem occurred only later, during the service execution in the AS. </p>
<heading level="2" id="h-0003">SUMMARY OF THE INVENTION </heading>
<p id="p-0014" num="0013"> It is an object of the present invention to improve error handling toward failure responses on a service control interface, e.g. the IMS service control interface (ISC). </p>
<p id="p-0015" num="0014"> This object is achieved by 
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0015"> a control device for providing communication control for users in a communications network, the control device comprising: 
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0016"> controlling means for controlling communication requests of the users; and </li>
        <li id="ul0002-0002" num="0017"> evaluating means for evaluating response messages received from applications, </li>
        <li id="ul0002-0003" num="0018"> wherein if a response message received from an application for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request based on service-specific data. </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0016" num="0019"> Furthermore, the above object is achieved by a method of providing communication control for users in a communications network, the method comprising the steps of: 
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0020"> retrieving service-specific data associated with a user, the service-specific data including communication request handling instructions for response messages received from applications providing services; </li>
        <li id="ul0004-0002" num="0021"> initiating a service for the user based on a request received from the user; </li>
        <li id="ul0004-0003" num="0022"> receiving, in response to the initiating step, an error response from the service; and 
<br/>
 determining whether to continue processing the request received from the user based on the instructions given for the error response in the service-specific data. 
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0017" num="0023"> Moreover, the above object is achieved by a serving device for executing services for users of a communications network, the serving device comprising: 
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0024"> determining means for determining whether a request received from a control device providing communication control for the users in the communications network can be handled by the serving device; </li>
        <li id="ul0006-0002" num="0025"> transmitting means for transmitting a response message for the request to the control device, the response message indicating to the control device a determination result by the determining means; and </li>
        <li id="ul0006-0003" num="0026"> adding means for adding information to the response message transmitted by the transmitting means if the determining means determines that the request cannot be handled by the serving device, wherein the information is to be used by the control device in deciding on communication request control. </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0018" num="0027"> Still further the above object is achieved by a data providing device comprising: 
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0028"> at least one database storing user-specific data, the user-specific data comprising service-specific data; </li>
        <li id="ul0008-0002" num="0029"> receiving means for receiving a request for retrieving service-specific data associated with a user, from a control device providing communication control for the user in a communications network; and 
<br/>
 transmitting means for transmitting the service-specific data to the control device upon the request, the service-specific data comprising, for at least one application, instructions for performing communication request control in correspondence with response messages transmitted from the at least one application to the control device. 
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0019" num="0030"> The above object is also achieved by a control system comprising: 
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0031"> a control device for providing communication control for users in a communications network; and </li>
        <li id="ul0010-0002" num="0032"> a data providing device, </li>
        <li id="ul0010-0003" num="0033"> wherein the control device comprises controlling means for controlling communication requests of the users, evaluating means for evaluating response messages received from applications, and retrieving means for issuing a request for retrieving service-specific data associated with a user from the data providing device, </li>
        <li id="ul0010-0004" num="0034"> and wherein the data providing device comprises </li>
        <li id="ul0010-0005" num="0035"> at least one database storing user-specific data, the user-specific data comprising service-specific data, receiving means for receiving the request for retrieving the service-specific data associated with the user from the control device, and transmitting means for transmitting the service-specific data to the control device upon the request, </li>
        <li id="ul0010-0006" num="0036"> wherein if a response message received from an application for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request based on the service-specific data received from the data providing device. </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0020" num="0037"> In addition, the above object is achieved by a serving system comprising: 
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0038"> a control device for providing communication control for users in a communications network; and </li>
        <li id="ul0012-0002" num="0039"> a serving device for executing services for the users, wherein the serving device comprises determining means for determining whether a request received from the control device can be handled by the serving device, and transmitting means for transmitting a response message for the request to the control device, the response message indicating to the control device a determination result by the determining means, and wherein </li>
        <li id="ul0012-0003" num="0040"> the control device comprises controlling means for controlling communication requests of the users, and evaluating means for evaluating response messages received from the serving device, </li>
        <li id="ul0012-0004" num="0041"> wherein if the response message received from the serving device for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request on the basis of service-specific data. </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0021" num="0042"> The present invention can also be implemented as computer program product. </p>
<p id="p-0022" num="0043"> According to the invention, an S-CSCF behavior in error situations where an error response is received from an AS can be improved. </p>
<p id="p-0023" num="0044"> Moreover, unnecessary AS usage can be avoided, since an AS may be dropped from the connection and session handling may continue without the AS. </p>
<?summary-of-invention description="Summary of Invention" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<heading level="2" id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<p id="p-0024" num="0045"> <figref idref="DRAWINGS">FIG. 1</figref> shows a basic architecture of an Internet Protocol (IP) Multimedia Subsystem (IMS) to which the present invention is applicable. </p>
<p id="p-0025" num="0046"> <figref idref="DRAWINGS">FIG. 2</figref> shows a structure of Filter Criteria according to the prior art. </p>
<p id="p-0026" num="0047"> <figref idref="DRAWINGS">FIG. 3</figref> shows a schematic block diagram illustrating an embodiment of a structure of a control device, a serving device and a data providing device according to the invention. </p>
<p id="p-0027" num="0048"> <figref idref="DRAWINGS">FIG. 4</figref> shows a flow chart illustrating a method of providing communication control for users in a communications network according to an embodiment of the invention. </p>
<p id="p-0028" num="0049"> <figref idref="DRAWINGS">FIG. 5</figref> shows a schematic block diagram illustrating signaling in an IMS network according to an embodiment of the invention. </p>
<p id="p-0029" num="0050"> <figref idref="DRAWINGS">FIG. 6</figref> shows a structure of Filter Criteria according to a first implementation example of the invention. </p>
<p id="p-0030" num="0051"> <figref idref="DRAWINGS">FIG. 7</figref> shows a structure of Filter Criteria according to a second implementation example of the invention.</p>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?detailed-description description="Detailed Description" end="lead"?>
<heading level="2" id="h-0005">DESCRIPTION OF THE INVENTION </heading>
<p id="p-0031" num="0052"> <figref idref="DRAWINGS">FIG. 3</figref> shows a schematic block diagram illustrating an embodiment of a structure of a control device <b>100</b>, a data providing device <b>200</b> and a serving device <b>300</b> according to the invention. </p>
<p id="p-0032" num="0053"> The control device <b>100</b> provides communication control for users in a communications network. The control device <b>100</b> may comprise an S-CSCF (Serving Call State Control Function) in an IMS (Internet protocol Multimedia Subsystem) network. The control device comprises a controlling block <b>11</b> for controlling/handling communication requests of users and an evaluating block <b>12</b> for evaluating response messages received from applications which may run services for users of the communications network. The control device <b>100</b> may further comprise a retrieving block <b>13</b> for issuing a request for retrieving service-specific data associated with a user from the data providing device <b>200</b>. A communication request may be a request for establishing a session or a request for sending a message. </p>
<p id="p-0033" num="0054"> The data providing device <b>200</b> may comprise a Home Subscriber Server (HSS) or User Mobility Server (UMS) and comprises at least one database <b>21</b> storing user-specific data, such as a user profile, comprising service-specific data. The data providing device <b>200</b> further comprises a receiving block <b>22</b> for receiving the request for retrieving the service-specific data associated with the user from the control device <b>100</b>, and a transmitting block <b>23</b> for transmitting the service-specific data to the control device <b>100</b> upon the request. </p>
<p id="p-0034" num="0055"> The serving device <b>300</b> executes services for the users of the communications network and may comprise an Application Server (AS) running an application. The serving device comprises a determining block <b>31</b> for determining whether a request received from the control device <b>100</b> can be handled by the serving device <b>300</b>, and a transmitting block <b>32</b> for transmitting a response message for the request to the control device <b>100</b>, the response message indicating to the control device <b>100</b> a determination result by the determining block <b>31</b>. </p>
<p id="p-0035" num="0056"> The serving device <b>300</b> may further comprise an adding block <b>33</b> for adding information to the response message transmitted by the transmitting block <b>32</b> in case the determining block <b>31</b> determines that the request cannot be handled by the serving device <b>300</b>, wherein the information is to be used by the control device in deciding on communication request control. </p>
<p id="p-0036" num="0057"> In case the response message received from the serving device <b>300</b> for a communication request is evaluated as an error message by the evaluating block <b>12</b> of the control device <b>100</b>, the controlling block <b>11</b> continues control of the communication request on the basis of service-specific data. This data may have been retrieved from the data providing device <b>200</b> by the retrieving block <b>13</b> of the control device <b>100</b> or may have been provided to the control device <b>100</b> directly from an operator of the control device <b>100</b>. </p>
<p id="p-0037" num="0058"> The evaluating block <b>12</b> of the control device <b>11</b> may further evaluate any information added to the response message received from the application or serving device <b>300</b>, the controlling block <b>11</b> deciding on continuing control of the communication request using the information added to the response message. </p>
<p id="p-0038" num="0059"> It is to be noted that the structures of the devices are not limited to those shown in <figref idref="DRAWINGS">FIG. 3</figref>. Blocks of a device may be combined to implement the functionality of the combined blocks in one &#x2018;super-block&#x2019;, or the functionality of a block may be further separated into sub-blocks. The blocks of each device may be implemented as application specific integrated circuits or by digital signal processor(s). In addition, the devices shown in <figref idref="DRAWINGS">FIG. 3</figref> are described to an extent necessary for understanding the present invention, and may additionally comprise conventional blocks and functions necessary for acting e.g. as S-CSCF, HSS and AS. </p>
<p id="p-0039" num="0060"> <figref idref="DRAWINGS">FIG. 4</figref> shows a flow chart illustrating a method of providing communication control for users in a communications network according to an embodiment of the invention. </p>
<p id="p-0040" num="0061"> In a first step S<b>41</b> of the method service-specific data associated with a user are retrieved, the service-specific data including communication request handling instructions for response messages received from applications providing services. Upon a request received from the user, in step S<b>42</b> a service for the user is initiated. Then, when receiving in step S<b>43</b>, in response to the initiating step S<b>42</b>, an error response from the service, in step S<b>44</b> it is decided on continuing (i.e. it is determined whether to continue) processing the request received from the user based on the instructions given for the error response in the service-specific data. </p>
<p id="p-0041" num="0062"> In the following, signaling in an IMS network to which the embodiment shown in <figref idref="DRAWINGS">FIG. 4</figref> is applied will be described with reference to <figref idref="DRAWINGS">FIG. 5</figref>. In this application example the functions of the control device <b>100</b> are implemented in an S-CSCF (Serving Call State Control Function) <b>51</b>, the functions of the data providing device <b>200</b> are implemented in an HSS (Home Subscriber Server)/UMS (User Mobility Server) <b>52</b>, and the functions of the serving device <b>300</b> are implemented in an AS (Application Server) <b>53</b>. </p>
<p id="p-0042" num="0063"> Upon registration of a user the S-CSCF <b>51</b> fetches initial Filter Criteria (iFC) via Cx interface from the HSS/UMS storing all the user related subscription data, such as location information, security information and user profile information defining the services that the user is subscribed to. The iFC are service-specific data associated with the user. According to this application example, the iFC further include communication request handling instructions for response messages received from applications providing services. The communication request handling instructions comprise response code specific default handling parameters. </p>
<p id="p-0043" num="0064"> Upon receiving a request from the registered user, after having evaluated the iFC, the S-CSCF <b>51</b> initiates a service request to the AS <b>53</b> via ISC interface. In case the AS <b>53</b> is reachable but the application fails, the AS <b>53</b> responds with an error message, e.g. with a 4xx, 5xx or 6xx class response. </p>
<p id="p-0044" num="0065"> For example, SIP Responses include a 3-digit Status-Code and a Reason-Phrase. The Status-Code is intended for use by automata, whereas the Reason-Phrase is intended for the end user giving a short textual description of the Status-Code. SIP Responses are categorized into six classes based on the first digit of the Status-Code: 
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0066"> 1xx: Provisional response: request received, continuing to process the request; </li>
        <li id="ul0014-0002" num="0067"> 2xx: Success: the action was successfully received, understood, and accepted; </li>
        <li id="ul0014-0003" num="0068"> 3xx: Redirection: further action needs to be taken in order to complete the request; </li>
        <li id="ul0014-0004" num="0069"> 4xx: Client Error: the request contains bad syntax or cannot be fulfilled at this server; </li>
        <li id="ul0014-0005" num="0070"> 5xx: Server Error: the server failed to fulfill an apparently valid request; </li>
        <li id="ul0014-0006" num="0071"> 6xx: Global Failure: the request cannot be fulfilled at any server. </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0045" num="0072"> The last two digits, referred above as &#x201c;xx&#x201d;, indicate the more specific reason inside the class. When an AS fails in the service execution it sends one of the 4xx, 5xx or 6xx class responses to the S-CSCF. </p>
<p id="p-0046" num="0073"> When the S-CSCF <b>51</b> receives the error message from the AS <b>53</b>, it decides on how to continue processing the request based on the instructions given for the error message in the iFC. For example, the S-CSCF <b>51</b> may further handle the request based on the response code specific default handling parameters, where some response codes can be configured as &#x2018;continue&#x2019;, meaning that the S-CSCF <b>51</b> should try to further process the request received from the user, and some other response codes can be configured as &#x2018;abandon&#x2019;, meaning that the S-CSCF <b>51</b> should continue the response handling. </p>
<p id="p-0047" num="0074"> Thus, according to this application example the functionality of the iFC Default Handling parameter usage is expanded, thereby enhancing the ISC interface. </p>
<p id="p-0048" num="0075"> Moreover, the S-CSCF <b>51</b> may check and process also additional information added to the error message, e.g. the content of the Reason-Phrase of a SIP response. The S-CSCF <b>51</b> may then base the decision on continuing processing the request also on this additional information. Also instructions may be given for the additional information in the iFC. </p>
<p id="p-0049" num="0076"> Thus, with this arrangement, more information about possible errors may be carried from the AS <b>53</b> to the S-CSCF <b>51</b>. </p>
<p id="p-0050" num="0077"> <figref idref="DRAWINGS">FIG. 6</figref> shows a structure of Filter Criteria according to a first implementation example of the invention. In the iFC a further field &#x2018;Reason code handling&#x2019; is provided for the default handling of specific responses from an application server running an application providing service(s). For example, the response code specific default handling parameters include an instruction &#x2018;continue&#x2019; for the response code &#x2018;413&#x2019;, while for other response codes the S-CSCF is instructed to not continue handling the user request, i.e. to abandon processing of the user request, or proceed according to indicated response code. </p>
<p id="p-0051" num="0078"> <figref idref="DRAWINGS">FIG. 7</figref> shows a structure of Filter Criteria according to a second implementation example of the invention. In this example the reason code handling is added to the &#x2018;Default handling&#x2019; field. As shown in the example depicted in <figref idref="DRAWINGS">FIG. 7 a</figref> general default handling parameter is set to &#x2018;abandon&#x2019;, while only when the response code is &#x2018;413&#x2019; processing of the user request is to be continued, i.e. the S-CSCF should try to process the request further despite/regardless of the error indicated by the AS <b>53</b>. </p>
<p id="p-0052" num="0079"> In the following an example is considered in which the S-CSCF <b>51</b> receives a request from a registered user causing the S-CSCF <b>51</b>, based on an evaluation of the iFC retrieved from the HSS/UMS <b>52</b>, to contact an application server, e.g. the AS <b>53</b>, for the service of an Instant Message (IM) to GSM Short Message conversion. In case the AS <b>53</b> is not able to carry out this conversion e.g. because the instant message is too long, it responds with an error message &#x2018;413 &#x201c;Entity too long&#x201d;&#x2019;. Upon receiving this error message, the S-CSCF <b>51</b> looks up the response code specific default handling parameters in the iFC and, according to <figref idref="DRAWINGS">FIG. 6</figref>, retrieves from the iFC that for a response message &#x2018;413&#x2019; processing of the user request is to be continued. Thus, the S-CSCF <b>51</b> continues handling the request as verifying the lower priority triggers in the iFC. Thus, the Instant Message handling can be continued without conversion possibility, and the S-CSCF <b>51</b> may try to deliver the instant message to the recipient by other means. </p>
<p id="p-0053" num="0080"> As another example, for crucial applications, such as online charging related functions, the response code specific default handling parameters for relevant response codes are preferably set to &#x2018;abandon&#x2019; (i.e. are preferably set to continue response handling) since otherwise the request would be processed further free-of-charge. </p>
<p id="p-0054" num="0081"> According to the invention, control device behavior in error situations where an error response is received from an application is improved. In case a response message received from an application for a communication request is evaluated as an error message by the control device, control of the communication request can be continued on the basis of service-specific data. </p>
<p id="p-0055" num="0082"> It is to be understood that the above description is illustrative of the invention and is not to be construed as limiting the invention. Various modifications and applications may occur to those skilled in the art without departing from the true spirit and scope of the invention as defined by the appended claims. </p>
<?detailed-description description="Detailed Description" end="tail"?>
</description>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text><b>1</b>. A control device for providing communication control for users in a communications network, the control device comprising: 
<claim-text>controlling means for controlling communication requests of the users; and </claim-text>
<claim-text>evaluating means for evaluating response messages received from applications, </claim-text>
<claim-text>wherein if a response message received from an application for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request based on service-specific data. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00002" num="00002">
<claim-text><b>2</b>. The control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising: 
<claim-text>retrieving means for retrieving the service-specific data, the service-specific data being part of user-specific data, from a data providing device comprising a database storing the user-specific data, the service-specific data comprising instructions for continuing control of the communication request in correspondence with response messages from the application. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00003" num="00003">
<claim-text><b>3</b>. The control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the evaluating means is configured to evaluate information added to the response message received from the application and the controlling means is configured to determine whether to continue control of the communication request using the information added to the response message. </claim-text>
 </claim>
<claim id="CLM-00004" num="00004">
<claim-text><b>4</b>. The control device of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the evaluating means is configured to evaluate information added to the response message received from the application and the controlling means is configured to determine whether to continue control of the communication request using the information added to the response message. </claim-text>
 </claim>
<claim id="CLM-00005" num="00005">
<claim-text><b>5</b>. A serving device for executing services for users of a communications network, the serving device comprising: 
<claim-text>determining means for determining whether a request received from a control device providing communication control for the users in the communications network can be handled by the serving device; </claim-text>
<claim-text>transmitting means for transmitting a response message for the request to the control device, the response message indicating to the control device a determination result by the determining means; and </claim-text>
<claim-text>adding means for adding information to the response message transmitted by the transmitting means if the determining means determines that the request cannot be handled by the serving device, wherein the information is to be used by the control device in deciding on communication request control. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00006" num="00006">
<claim-text><b>6</b>. A data providing device comprising: 
<claim-text>at least one database storing user-specific data, the user-specific data comprising service-specific data; </claim-text>
<claim-text>receiving means for receiving a request for retrieving service-specific data associated with a user, from a control device providing communication control for the user in a communications network; and </claim-text>
<claim-text>transmitting means for transmitting the service-specific data to the control device upon the request, the service-specific data comprising, for at least one application, instructions for performing communication request control in correspondence with response messages transmitted from the at least one application to the control device. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00007" num="00007">
<claim-text><b>7</b>. A control system comprising: 
<claim-text>a control device for providing communication control for users in a communications network; and </claim-text>
<claim-text>a data providing device, </claim-text>
<claim-text>wherein the control device comprises controlling means for controlling communication requests of the users, evaluating means for evaluating response messages received from applications, and retrieving means for issuing a request for retrieving service-specific data associated with a user from the data providing device, </claim-text>
<claim-text>and wherein the data providing device comprises </claim-text>
<claim-text>at least one database storing user-specific data, the user-specific data comprising service-specific data, receiving means for receiving the request for retrieving the service-specific data associated with the user from the control device, and transmitting means for transmitting the service-specific data to the control device upon the request, </claim-text>
<claim-text>wherein if a response message received from an application for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request based on the service-specific data received from the data providing device. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00008" num="00008">
<claim-text><b>8</b>. A serving system comprising: 
<claim-text>a control device for providing communication control for users in a communications network; and </claim-text>
<claim-text>a serving device for executing services for the users, wherein the serving device comprises determining means for determining whether a request received from the control device can be handled by the serving device, and transmitting means for transmitting a response message for the request to the control device, the response message indicating to the control device a determination result by the determining means, and wherein </claim-text>
<claim-text>the control device comprises controlling means for controlling communication requests of the users, and evaluating means for evaluating response messages received from the serving device, </claim-text>
<claim-text>wherein if the response message received from the serving device for a communication request is evaluated as an error message by the evaluating means, the controlling means is configured to continue control of the communication request on the basis of service-specific data. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00009" num="00009">
<claim-text><b>9</b>. A method of providing communication control for users in a communications network, the method comprising the steps of: 
<claim-text>retrieving service-specific data associated with a user, the service-specific data including communication request handling instructions for response messages received from applications providing services; </claim-text>
<claim-text>initiating a service for the user based on a request received from the user; </claim-text>
<claim-text>receiving, in response to the initiating step, an error response from the service; and </claim-text>
<claim-text>determining whether to continue processing the request received from the user based on the instructions given for the error response in the service-specific data. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00010" num="00010">
<claim-text><b>10</b>. A method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the determining whether to continue processing the request received from the user comprises processing the request further or processing the error response further based on the communication request handling instructions given for the error response in the service-specific data. </claim-text>
 </claim>
<claim id="CLM-00011" num="00011">
<claim-text><b>11</b>. A method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the request received from the user is a request for establishing a session or a request for sending a message. </claim-text>
 </claim>
<claim id="CLM-00012" num="00012">
<claim-text><b>12</b>. A method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the request received from the user is a request for establishing a session or a request for sending a message. </claim-text>
 </claim>
<claim id="CLM-00013" num="00013">
<claim-text><b>13</b>. A computer program embedded on a computer-readable medium, the program comprising software code portions for performing, when the program is run on the processing device, the steps of the method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>. </claim-text>
 </claim>
<claim id="CLM-00014" num="00014">
<claim-text><b>14</b>. The computer program product according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the program is directly loadable into an internal memory of the device. </claim-text>
 </claim>
<claim id="CLM-00015" num="00015">
<claim-text><b>15</b>. The computer program according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the determining whether to continue processing the request received from the user comprises processing the request further or processing the error response further based on the communication request handling instructions given for the error response in the service-specific data. </claim-text>
 </claim>
<claim id="CLM-00016" num="00016">
<claim-text><b>16</b>. The computer program according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the request received from the user is a request for establishing a session or a request for sending a message. </claim-text>
 </claim>
<claim id="CLM-00017" num="00017">
<claim-text><b>17</b>. The computer program according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the request received from the user is a request for establishing a session or a request for sending a message.</claim-text>
 </claim>
</claims>
</us-patent-application>
