<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE us-patent-application SYSTEM "us-patent-application-v42-2006-08-23.dtd" [ ]>
<us-patent-application lang="EN" dtd-version="v4.2 2006-08-23" file="US20070001010A1-20070104.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20061221" date-publ="20070104">
<us-bibliographic-data-application lang="EN" country="US">
<publication-reference>
<document-id>
<country>US</country>
<doc-number>20070001010</doc-number>
<kind>A1</kind>
<date>20070104</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11421592</doc-number>
<date>20060601</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2005-190491</doc-number>
<date>20050629</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>7</main-group>
<subgroup>10</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20070104</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>235454000</main-classification>
<further-classification>235470000</further-classification>
</classification-national>
<invention-title id="d0e129">POSITIONING CONTROLLING APPARATUS, POSITIONING CONTROL METHOD, PROGRAM FOR MAKING COMPUTER EXECUTE THIS METHOD, IMAGE FORMING APPARATUS, AND RECORDING MEDIUM</invention-title>
<parties>
<applicants>
<applicant sequence="00" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Yamane</last-name>
<first-name>Jun</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<nationality>
<country>JP</country>
</nationality>
<residence>
<country>JP</country>
</residence>
</applicant>
</applicants>
<correspondence-address>
<addressbook>
<name>C. IRVIN MCCLELLAND;OBLON, SPIVAK, MCCLELLAND, MAIER &#x26; NEUSTADT, P.C.</name>
<address>
<address-1>1940 DUKE STREET</address-1>
<city>ALEXANDRIA</city>
<state>VA</state>
<postcode>22314</postcode>
<country>US</country>
</address>
</addressbook>
</correspondence-address>
</parties>
</us-bibliographic-data-application>
<abstract id="abstract">
<p id="p-0001" num="0000">A positioning controlling apparatus includes: a current speed calculator that calculates a current speed of a conveyor belt from a detected moving distance; a position determining unit that determines the position of a conveyor belt for determining its stop position also from the detected moving distance; a gain switch having a plurality of gains; a target speed calculator that inputs a gain obtained by switching, and calculates a target speed of the conveyor belt; a speed error calculator that calculates an error between a calculated target speed and a calculated current speed; and an automatic controller that controls a drive motor by using a speed error. When the position determining unit determines that the conveyor belt is in the positioning area, the gain switch performs positioning while switching plural gains and outputting it. </p>
</abstract>
<drawings id="DRAWINGS">
<figure id="figure-D00000" num="00000">
<img id="EMI-D00000" he="153.86mm" wi="142.68mm" file="US20070001010A1-20070104-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00001" num="00001">
<img id="EMI-D00001" he="211.67mm" wi="191.01mm" file="US20070001010A1-20070104-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00002" num="00002">
<img id="EMI-D00002" he="106.00mm" wi="171.45mm" file="US20070001010A1-20070104-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00003" num="00003">
<img id="EMI-D00003" he="252.14mm" wi="199.64mm" file="US20070001010A1-20070104-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00004" num="00004">
<img id="EMI-D00004" he="211.33mm" wi="197.27mm" file="US20070001010A1-20070104-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00005" num="00005">
<img id="EMI-D00005" he="262.72mm" wi="198.46mm" file="US20070001010A1-20070104-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00006" num="00006">
<img id="EMI-D00006" he="161.46mm" wi="158.24mm" file="US20070001010A1-20070104-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="figure-D00007" num="00007">
<img id="EMI-D00007" he="239.69mm" wi="185.17mm" file="US20070001010A1-20070104-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?summary-of-invention description="Summary of Invention" end="lead"?>
<heading level="2" id="h-0001">CROSS-REFERENCE TO RELATED APPLICATIONS </heading>
<p id="p-0002" num="0001"> The present document incorporates by reference the entire contents of Japanese priority document, 2005-190491 filed in Japan on Jun. 29, 2005. </p>
<heading level="2" id="h-0002">BACKGROUND OF THE INVENTION </heading>
<p id="p-0003" num="0002"> 1. Field of the Invention </p>
<p id="p-0004" num="0003"> The present invention relates to a positioning controlling apparatus, a positioning control method, a program for making a computer execute this method, an image forming apparatus, and a recording medium. </p>
<p id="p-0005" num="0004"> 2. Description of the Related Art </p>
<p id="p-0006" num="0005"> In recent years, it is a very important task, from a viewpoint of image quality, to accurately move a paper conveying system by a desired distance and stop the system at this position, in an image forming apparatus such as a copying machine and a printer, particularly, in an image forming apparatus having an inkjet printing mechanism. </p>
<p id="p-0007" num="0006"> There has been developed a technique of decreasing the cost of generating a circuit and facilitating a change in control design, by digital control of software process using a low-cost general-purpose central processing unit (CPU) and a low-cost digital signal processor (DSP) in place of an analog control circuit. </p>
<p id="p-0008" num="0007"> A moved amount of a paper conveyor roller system that conveys recording paper in the above image forming apparatuses can be obtained at a relatively low cost, by obtaining information corresponding to a rotation angle of the conveyor roller, with a rotary encoder fitted to the conveyor roller. The encoder generates pulses with the edges settled beforehand. While the encoder includes an analog type and a digital type, the digital type encoder can stably obtain rotation angle information with a sensor. Precision of the obtained rotation angle information depends on resolution of the encoder. </p>
<p id="p-0009" num="0008"> <figref idref="DRAWINGS">FIG. 6</figref> is an explanatory diagram of motor control of a paper conveying system performed by a conventional positioning controlling apparatus. In a paper conveyor belt apparatus <b>7</b>, a drive roller <b>372</b> connected to a timing belt <b>470</b> from a motor <b>270</b> rotates to move a conveyor belt <b>371</b>. A rotary encoder <b>571</b> is set on the drive roller <b>372</b>. </p>
<p id="p-0010" num="0009"> A sensor <b>572</b> detects an output from a rotary encoder <b>571</b>. A positioning controlling apparatus <b>17</b> outputs an obtained control instruction to a motor <b>270</b>, based on position information detected by the sensor <b>572</b>, and applies torque to the motor <b>270</b>. The control instruction has a different format depending on a motor driver, such as a current instruction and a voltage instruction. </p>
<p id="p-0011" num="0010"> A control algorithm of this motor control includes a speed feedback control up to a position near a target value, and a position feedback control which is performed near a stop position. In the speed feedback control, the controlling apparatus measures a current speed and controls the current speed to make the difference between the current speed and a target speed zero. </p>
<p id="p-0012" num="0011"> In the position feedback control, the controlling apparatus multiplies a predetermined gain to a difference between the current position and the target position, thereby obtaining a target speed. The controlling apparatus performs a speed feedback based on the target speed, thereby simultaneously setting the speed and the position difference to zero. </p>
<p id="p-0013" num="0012"> However, near a stop position, behavior of the system based on the same instruction is different, depending on a twist of a rotation axis such as a motor axis, a drive roller axis, and a pulley to which each belt is applied. This behavior is greatly affected when the twist becomes large. Particularly, the behavior is different depending on a rotation direction of the system. </p>
<p id="p-0014" num="0013"> Torque is applied to the system in a direction returning from the twist. Therefore, it is not necessary to output an instruction to apply large torque in this direction. When torque larger than is necessary is applied, oscillation can be generated. On the other hand, relatively large torque needs to be applied in a direction opposite to the direction of returning from the twist. When this torque is small, time of converging to a target position can be delayed. </p>
<p id="p-0015" num="0014"> However, conventionally, it is not necessary to perform such a fine control in a sub-scan direction. This is because image degradation due to a &#x201c;blur&#x201d; of an image forming material such as ink at the image formation time, is more prominent than the positioning deviation, thereby overlooking the precision in positioning in the sub-scan direction. However, recently, ink for an inkjet printer has high granularity to meet a demand for an improved image quality. As a result, high precision is also required for paper feeding in the sub-scan direction. </p>
<p id="p-0016" num="0015"> In a conventional image forming apparatus such as an inkjet printer, a high-precision position deviation correction has not been particularly necessary as explained above. Therefore, there are few conventional examples of high-precision position correction. In other technical field, a positioning control technique in a servo control method for driving a feed rod of machine tool is proposed in Japanese Patent Specification No. 3271440. According to this servo control method for driving a feed rod of machine tool, in order to correct a positioning error due to a backlash, a state switching time is predicted by taking a delay in a position instruction and a position output into consideration, and a servo control is performed by switching an integration time constant. </p>
<p id="p-0017" num="0016"> However, the technique disclosed in Japanese Patent Specification No. 3271440 is applied for cutting metal or the like having high hardness in the machine tool and solves a similar problem in a technique assuming occurrence of a huge torque. Therefore, this technique is not suitable to control the behavior of a speed change near a stop position, as a method of correcting a positional deviation of a rotation axis of a general image forming apparatus in which a large torque like metal cutting does not occur. </p>
<heading level="2" id="h-0003">SUMMARY OF THE INVENTION </heading>
<p id="p-0018" num="0017"> The present invention has been proposed for coping with the aforementioned conventional problems, and it is an object of the present invention to at least partially solve the problems in the conventional technology. </p>
<p id="p-0019" num="0018"> According to one aspect of the present invention, a positioning controlling apparatus, which controls a stop position of a conveyor of a conveying apparatus, wherein the conveying apparatus includes a driving unit for driving a rotation axis and the conveyor for conveying a conveyed object based on rotation of the rotation axis driven by the driving unit, is constructed such that it includes: a moving distance detector that measures a moving distance of the conveyor; a current speed calculator that calculates a current speed of the conveyor, from a moving distance detected by the moving distance detector; a position determining unit that determines whether the conveyor is in a positioning area for determining the stop position, from the moving distance detected by the moving distance detector; a target speed calculator that inputs a gain to be multiplied to a current speed calculated by the current speed calculator, and calculates a target speed of the conveyor; a gain switch that has a plurality of the gains to be used by the target speed calculator, and outputs a gain to the target speed calculator while switching between the gains, when the position determining unit determines that the conveyor is in the positioning area; a speed error calculator that calculates an error between a target speed calculated by the target speed calculator and a current speed calculated by the current speed calculator; and a controller that controls the driving unit, by using a speed error calculated by the speed error calculator. </p>
<p id="p-0020" num="0019"> According to another aspect of the present invention, a positioning controlling method for controlling a stop position of a conveyor, which carries an object to be conveyed and is moved based on rotation of a rotation axis driven by a driving unit, includes: detecting a moving distance of the conveyor; calculating a current speed of the conveyor, from a moving distance obtained at the detecting; determining whether the conveyor is in a positioning area for determining the stop position, from a moving distance obtained at the detecting; calculating a target speed of the conveyor by inputting a gain to be multiplied to a current speed obtained at the calculating of a current speed; outputting a gain to be used at the calculating of a target speed while switching between a plurality of gains, when the conveyor is determined to be in the positioning area at the determining, by selecting one of the plurality of gains; calculating an error between a target speed obtained at the calculating of a target speed and a current speed obtained at the calculating of a current speed; and controlling the driving unit, by using a speed error obtained at the calculating of a speed error. </p>
<p id="p-0021" num="0020"> According to still another aspect of the present invention, a computer-readable recording medium is constructed such that it stores therein a computer program that causes a computer to execute the above-disclosed positioning controlling method. </p>
<p id="p-0022" num="0021"> According to still another aspect of the present invention, an image forming apparatus is constructed such that it includes an image processing apparatus that inputs image information and processes the input image, an image output apparatus that outputs an image on recording paper following image information obtained by the image process performed by the image processing apparatus, a conveying apparatus having a driving unit that drives a rotation axis, and a conveyor that conveys the recording paper based on rotation of the rotation axis driven by the driving unit, and a positioning controlling apparatus that controls the conveying apparatus to convey the recording paper to a position where the image output apparatus outputs an image on the recording paper, wherein the positioning controlling apparatus is constructed as mentioned above. </p>
<p id="p-0023" num="0022"> The above and other objects, features, advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention, when considered in connection with the accompanying drawings.</p>
<?summary-of-invention description="Summary of Invention" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<heading level="2" id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<p id="p-0024" num="0023"> <figref idref="DRAWINGS">FIG. 1</figref> is a functional block diagram of a paper conveying apparatus according to a first embodiment of the present invention; </p>
<p id="p-0025" num="0024"> <figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of one example of a target speed calculation algorithm used by a target speed calculator; </p>
<p id="p-0026" num="0025"> <figref idref="DRAWINGS">FIG. 3</figref> is a flowchart of a positioning control procedure according to the first embodiment; </p>
<p id="p-0027" num="0026"> <figref idref="DRAWINGS">FIG. 4</figref> is a functional block diagram of a paper conveying apparatus to which a positioning controlling apparatus according to a second embodiment of the present invention is applied; </p>
<p id="p-0028" num="0027"> <figref idref="DRAWINGS">FIG. 5</figref> is a flowchart of a positioning control procedure according to the second embodiment; </p>
<p id="p-0029" num="0028"> <figref idref="DRAWINGS">FIG. 6</figref> is an explanatory diagram of motor control of a paper conveying system performed by a conventional positioning controlling apparatus; and </p>
<p id="p-0030" num="0029"> <figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of a hardware configuration of an inkjet printer.</p>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?detailed-description description="Detailed Description" end="lead"?>
<heading level="2" id="h-0005">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<p id="p-0031" num="0030"> Exemplary embodiments of a positioning controlling apparatus, a positioning control method, a program for making a computer execute this method, an image forming apparatus, and a recording medium according to the present invention will be explained in detail below with reference to the accompanying drawings. The embodiments are explained according to first and second embodiments, and a plurality of modifications. </p>
<p id="p-0032" num="0031"> A positioning controlling apparatus and a paper conveying apparatus using this positioning controlling apparatus according to the first embodiment are explained in detail below. The paper conveying apparatus conveys paper, using the positioning controlling apparatus that moves a conveyor belt in a sub-scan direction by a predetermined distance, in an inkjet image forming apparatus. </p>
<p id="p-0033" num="0032"> <figref idref="DRAWINGS">FIG. 1</figref> is a functional block diagram of the paper conveying apparatus according to the first embodiment. A paper conveying apparatus <b>1</b> according to the first embodiment includes a digital speed controlling apparatus <b>10</b>, a paper conveyor belt apparatus <b>300</b>, and a moving distance detecting apparatus <b>500</b>. </p>
<p id="p-0034" num="0033"> The paper conveyor belt apparatus <b>300</b> has a drive motor <b>200</b>, a conveyor belt <b>301</b>, a drive roller <b>302</b>, a driven roller <b>303</b>, and a timing belt <b>400</b>. The drive motor <b>200</b> rotates the drive roller <b>302</b> via the timing belt <b>400</b>. The drive roller <b>302</b> rotatably supports a conveyor belt <b>301</b> with the drive roller <b>302</b> and a driven roller <b>303</b>, thereby rotating the conveyor belt <b>301</b>. The drive motor <b>20</b> uses a direct current motor, for example. </p>
<p id="p-0035" num="0034"> The moving distance detector <b>500</b> has a rotary encoder <b>501</b> and a sensor <b>502</b>. The moving distance detector <b>500</b> detects a current moving distance of the conveyor belt <b>301</b>. The moving distance detector <b>500</b> can be a digital rotary encoder fitted to the drive motor <b>200</b>, a rotary encoder fitted to the drive roller <b>302</b>, a linear encoder fitted to the surface of the conveyor belt <b>301</b>, or the like. These encoders can obtain a moving distance in only an integral multiple of a predetermined minimum unit. The rotary encoder <b>501</b> outputs a moving distance as an integral value of an encoder pulse unit. The rotary encoder <b>501</b> fitted to the drive roller <b>302</b> is explained below. However, the type of the rotary encoder is not limited to this. </p>
<p id="p-0036" num="0035"> The rotary encoder <b>501</b> outputs a moving distance as an integral value of an encoder pulse unit. The sensor <b>502</b> detects the encoder pulse output from the rotary encoder <b>501</b>, and outputs the encoder pulse to the positioning controlling apparatus <b>10</b>. </p>
<p id="p-0037" num="0036"> The positioning controlling apparatus <b>10</b> has a position determining unit <b>100</b>, a target speed calculator <b>101</b>, a current speed calculator <b>102</b>, a speed error calculator <b>103</b>, an automatic controller <b>104</b>, a speed determining unit <b>105</b>, and a gain switch <b>106</b>. </p>
<p id="p-0038" num="0037"> The position determining unit <b>100</b> compares a moving distance detected by the moving distance detector <b>500</b> with a target position, and determines whether the conveyor belt <b>301</b> is in a positioning control area in which the positioning controlling apparatus <b>10</b> performs the positioning control to stop the conveyor belt <b>301</b>. The positioning control area is provided for the positioning controlling apparatus <b>10</b> to bring the conveyor belt <b>301</b> to near a stop position at the beginning and then finely control the position of the conveyor belt <b>301</b> accurately to the stop position. The positioning control area is an area of a distance of dozens of microns from the stop position. </p>
<p id="p-0039" num="0038"> The current speed calculator <b>102</b> inputs a moving distance from the moving distance detector <b>500</b>, calculates a current speed based on the input moving distance, and outputs the calculated current speed to the speed error calculator <b>103</b> and the speed determining unit <b>105</b>. </p>
<p id="p-0040" num="0039"> The speed determining unit <b>105</b> inputs the current speed from the current speed calculator <b>102</b>, determines whether the input current speed is positive or negative, and outputs a result of the determination of positive or negative, to the gain switch <b>106</b>. </p>
<p id="p-0041" num="0040"> The gain switch <b>106</b> inputs a result of the determination from the speed determining unit <b>105</b>, selects a gain corresponding to a determined positive or negative of the current speed, from among plural gains, and outputs the selected gain to the target speed calculator <b>101</b>. </p>
<p id="p-0042" num="0041"> The target speed calculator <b>101</b> inputs moving distance information from the moving distance detector <b>500</b>, calculates a moving speed of the conveyor belt <b>301</b>, and inputs the gain switched by the gain switch <b>106</b>. The target speed calculator <b>101</b> generates a target speed by multiplying the input gain to the calculated moving speed of the conveyor belt <b>301</b>, and outputs the generated target speed to the speed error calculator <b>103</b>. </p>
<p id="p-0043" num="0042"> The speed error calculator <b>103</b> inputs the target speed from the target speed calculator <b>101</b>, and inputs the current speed from the current speed calculator <b>102</b>. The speed error calculator <b>103</b> generates a speed error as a difference between the input current speed and the input target speed, and outputs the speed error to the automatic controller <b>104</b>. </p>
<p id="p-0044" num="0043"> The automatic controller <b>104</b> inputs the speed error from the speed error calculator <b>103</b>, calculates a motor drive output, and outputs a motor drive amount as a drive instruction, to the drive motor <b>200</b>. </p>
<p id="p-0045" num="0044"> Each unit that constitutes the positioning controlling apparatus can be configured by programming a general-purpose computer or a general-purpose digital signal processor (DSP). </p>
<p id="p-0046" num="0045"> Operation of the paper conveying apparatus <b>1</b> that uses the positioning controlling apparatus <b>10</b> is explained next. The target speed calculator <b>101</b> calculates a target speed at each time, using a control starting time as a basis, a current moving distance of the belt, and a current speed. </p>
<p id="p-0047" num="0046"> <figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of one example of a target speed generation algorithm that is used by the target speed calculator <b>101</b>. The target speed calculator <b>101</b> uses this target speed generation algorithm having substantially a trapezoidal shape, as a target speed generation method. The target speed generation algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref> employs a sampling time since it is a digital control. The target speed calculator <b>101</b> accelerates a target speed at an equal acceleration rate from the control starting time till a predetermined time t<b>1</b>, and switches the acceleration to an equal-speed control upon reaching a predetermined speed v<b>2</b>. Thereafter, the target speed is subjected to a deceleration control expressed by a function of a moving distance, when the moving distance reaches a predetermined level (p<b>3</b>). The target speed is controlled at an equal-speed again when the current speed reaches v<b>4</b>. </p>
<p id="p-0048" num="0047"> When the moving distance reaches a predetermined level p<b>5</b>, the target speed is again subjected to a deceleration control expressed by a function of the moving distance. When the moving distance reaches p<b>6</b>, a position control mode starts, and this mode continues thereafter. A predetermined area near the target position is set as a positioning control area. In the positioning control area, the positioning controlling apparatus <b>10</b> controls the position of the conveyor belt <b>301</b> so that the position converges to a target stop position. </p>
<p id="p-0049" num="0048"> The position determining unit <b>100</b> determines whether the moving distance has reached the positioning control area, based on the moving distance detected by the sensor <b>502</b> of the moving distance detector <b>500</b>, as described above. The current speed calculator <b>102</b> obtains the current speed of the conveyor belt <b>301</b> based on a difference between adjacent sampling times of the moving distance input from the moving distance detector <b>500</b>. </p>
<p id="p-0050" num="0049"> When the position determining unit <b>100</b> determines that the conveyor belt <b>301</b> is not in the positioning control area, the target speed calculator <b>101</b> calculates a target speed, based on a target speed obtained with reference to <figref idref="DRAWINGS">FIG. 2</figref>. The speed error calculator <b>103</b> calculates an error between the target speed calculated by the target speed calculator <b>101</b> and the current speed calculated by the current speed calculator <b>102</b>. </p>
<p id="p-0051" num="0050"> On the other hand, when the position determining unit <b>100</b> determines that the conveyor belt <b>301</b> is in the positioning control area, the target speed calculator <b>101</b> calculates a target speed by multiplying the gain input from the gain switch <b>106</b>, to the difference between the target position and the current position. The speed determining unit <b>105</b> determines whether the current speed input from the current speed calculator <b>102</b> is in the same direction as the rotation direction of the drive motor <b>200</b> (positive), or is in the opposite direction to the rotation direction of the drive motor <b>200</b> (negative). The speed determining unit <b>105</b> outputs a result of the determination of positive or negative, to the gain switch <b>106</b>. </p>
<p id="p-0052" num="0051"> The gain switch <b>106</b> holds plural different gains, selects a corresponding gain following the input determination result, and outputs the selected gain to the target speed calculator <b>101</b>. For example, the gain switch <b>106</b> holds two gains of g<b>1</b> and g<b>2</b> (g<b>1</b>&#x3c;g<b>2</b>). When the input determination result is positive, torque returning from twist is applied. Therefore, g<b>1</b> having a relatively small value is selected. When the input determination result is negative, torque corresponding to the torque returning from twist needs to be applied. Therefore, g<b>2</b> having a relatively large value is selected. </p>
<p id="p-0053" num="0052"> The speed error calculator <b>103</b> calculates a difference between the target speed and the current speed calculated by the current speed calculator <b>102</b>, and outputs the difference to the automatic controller <b>104</b>. The automatic controller <b>104</b> controls the drive motor <b>200</b>, based on the input speed error. </p>
<p id="p-0054" num="0053"> The automatic controller <b>104</b> calculates a motor output using a predetermined controller calculation following the input speed error. The automatic control calculation includes a proportional (P) control, a proportional integral (P) control, a proportional integral derivative (PID) control, and a state feedback control. Among the controls, while a stable control result can be obtained by the PI control, the control is not limited to this method. </p>
<p id="p-0055" num="0054"> As described above, in the positioning control area, the drive motor <b>200</b> is driven using a calculated speed error by switching a gain, thereby stably and promptly positioning the conveyor belt <b>301</b> to a target position. </p>
<p id="p-0056" num="0055"> <figref idref="DRAWINGS">FIG. 3</figref> is a flowchart of a positioning control procedure according to the first embodiment. The position determining unit <b>100</b> determines whether a moving position of the conveyor belt <b>301</b> is in the positioning control area (step S<b>101</b>). When it is determined that a moving position of the conveyor belt <b>301</b> is not in the positioning control area (step S<b>101</b>: No), the target speed calculator <b>101</b> calculates a target speed in the area outside the positioning control area, based on the algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref> (step S<b>102</b>). The state that the conveyor belt <b>301</b> is not in the control area is the state before the position p<b>6</b> in <figref idref="DRAWINGS">FIG. 2</figref>. </p>
<p id="p-0057" num="0056"> When the current speed calculator <b>102</b> calculates the current speed (step S<b>103</b>), the speed error calculator <b>103</b> calculates an error between the calculated target speed and the calculated current speed (step S<b>104</b>). Since the conveyor belt <b>301</b> is not in the positioning area, a simple calculation for speed error is performed following the algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref>, without switching between the gains. </p>
<p id="p-0058" num="0057"> The automatic controller <b>104</b> controls and drives the drive roller <b>200</b> following the speed error calculated by the speed error calculator <b>103</b>, thereby performing controller process (step S<b>105</b>). As explained above, when the conveyor belt <b>301</b> is in the area outside the positioning control area, the speed error is calculated from a target speed obtained by using the algorithm as a speed characteristic determined using a lapse time as a variable, thereby controlling the drive roller. In the area outside the positioning control area, the conveyor belt <b>301</b> is quickly brought to the positioning control area near the stop area, without fine adjustment of the speed. </p>
<p id="p-0059" num="0058"> On the other hand, when the position determining unit <b>100</b> determines that the moving position of the conveyor belt <b>301</b> is in the positioning control area (step S<b>101</b>: Yes), that is, when and after the position determining unit <b>100</b> determines that the conveyor belt <b>301</b> has moved to the position p<b>6</b> in <figref idref="DRAWINGS">FIG. 2</figref>, fine positioning process is started. First, the current speed calculator <b>102</b> calculates the current speed of the conveyor belt <b>301</b> (step S<b>106</b>). The moving distance detector <b>500</b> can detect the speed from lapse of time corresponding to the moving distance. </p>
<p id="p-0060" num="0059"> The speed determining unit <b>105</b> determines whether the rotation direction of the drive roller <b>302</b> is positive (step S<b>107</b>). When it is determined that the rotation direction of the drive roller <b>302</b> is positive (step S<b>107</b>: Yes), that is, when the speed determining unit <b>105</b> determines that the drive roller <b>302</b> is in the same direction as that set as the sub-scan direction, the gain switch <b>106</b> switches the gain to the positive gain (step S<b>108</b>). The target speed calculator <b>101</b> multiplies the positive gain to the current speed, thereby obtaining a target speed. The current speed can be detected as a position difference. Therefore, the current speed can be calculated by multiplying the positive gain to the current position difference (step S<b>109</b>). The speed error calculator <b>103</b> calculates an error between the current speed and the target speed (step S<b>104</b>). The automatic controller <b>104</b> controls and drives the drive roller <b>200</b> following the speed difference, and controls the conveyor belt <b>301</b> (step S<b>105</b>). </p>
<p id="p-0061" num="0060"> On the other hand, when the speed determining unit <b>105</b> determines that the rotation direction of the drive roller <b>302</b> is not positive (step S<b>107</b>: No), that is, when it is determined that the rotation direction of the drive roller <b>302</b> is opposite to the direction set as the sub-scan direction, the gain switch <b>106</b> switches the gain to the negative gain (step S<b>110</b>). Then, the target speed calculator <b>101</b> multiplies the negative gain to the current speed to obtain a target speed. </p>
<p id="p-0062" num="0061"> The current speed can be detected as a position difference. Therefore, the current speed can be calculated by multiplying the negative gain to the current position difference (step S<b>111</b>). The speed error calculator <b>103</b> calculates an error between the current speed and the target speed (step S<b>104</b>). The automatic controller <b>104</b> controls and drives the drive roller <b>200</b> following the speed difference, and controls the conveyor belt <b>301</b> (step S<b>105</b>). </p>
<p id="p-0063" num="0062"> A prescribed gain can be also obtained based on an absolute value of the difference, as well as based on the positive or negative sign of the difference. A finer gain switch becomes possible. </p>
<p id="p-0064" num="0063"> As explained above, the positioning controlling apparatus according to the first embodiment can stably and promptly converge the error due to a torque variation applied to the drive roller <b>302</b> that drives the conveyor belt <b>301</b>, to a target position, by switching the gain to a different gain following the rotation direction of the drive roller. </p>
<p id="p-0065" num="0064"> A positioning controlling apparatus and a paper conveying apparatus using this positioning controlling apparatus according to the second embodiment are explained below. A paper conveying apparatus <b>2</b> conveys paper, using the positioning controlling apparatus that moves a conveyor belt in a sub-scan direction by a predetermined distance, in an inkjet image forming apparatus. </p>
<p id="p-0066" num="0065"> <figref idref="DRAWINGS">FIG. 4</figref> is a functional block diagram of the paper conveying apparatus to which the positioning controlling apparatus according to the second embodiment is applied. The paper conveying apparatus <b>2</b> includes a positioning controlling apparatus <b>12</b>, a paper conveyor belt apparatus <b>300</b>, and the moving distance detector <b>500</b>. Like reference numerals denote like parts having the same configurations and performing the same operation as those in the first embodiment, and their explanation is omitted or is simplified. Points that are different from those in the first embodiment are mainly explained. </p>
<p id="p-0067" num="0066"> The drive motor <b>200</b>, the paper conveyor belt apparatus <b>300</b>, the timing belt <b>400</b>, and the moving distance detector <b>500</b> have configurations similar to those in the first embodiment, and therefore, their explanation is omitted. </p>
<p id="p-0068" num="0067"> The positioning controlling apparatus <b>12</b> has the position determining unit <b>100</b>, a target speed calculator <b>121</b>, the current speed calculator <b>102</b>, a speed error calculator <b>123</b>, an automatic controller <b>124</b>, a position difference determining unit <b>125</b>, and a gain switch <b>126</b>. </p>
<p id="p-0069" num="0068"> The position determining unit <b>100</b> compares a moving distance detected by the moving distance detector <b>500</b> with a target position, and determines whether the conveyor belt <b>301</b> is in a positioning control area in which the positioning controlling apparatus <b>12</b> performs the positioning control to stop the conveyor belt <b>301</b>. </p>
<p id="p-0070" num="0069"> The current speed calculator <b>102</b> inputs a moving distance from the moving distance detector <b>500</b>, calculates the current speed based on the input moving distance, and outputs the calculated current speed to the speed error calculator <b>123</b>. </p>
<p id="p-0071" num="0070"> The position difference determining unit <b>125</b> inputs a moving distance from the moving distance detector <b>500</b>, calculates a difference between the input current position and the target position, determines whether the calculated difference is positive or negative, and outputs a result of the determination of positive or negative, to the gain switch <b>126</b>. </p>
<p id="p-0072" num="0071"> The gain switch <b>126</b> inputs a result of the determination about positive or negative of the difference from the position difference determining unit <b>125</b>, and outputs a gain corresponding to a result of the determination about positive or negative, to the target speed calculator <b>121</b>. </p>
<p id="p-0073" num="0072"> The target speed calculator <b>121</b> inputs the moving distance from the moving distance detector <b>500</b>, and inputs the gain from the gain switch <b>126</b>. The target speed calculator <b>121</b> generates a target speed based on the input moving distance and the input gain, and outputs the generated target speed to the speed error calculator <b>123</b>. </p>
<p id="p-0074" num="0073"> The speed error calculator <b>123</b> inputs the target speed from the target speed calculator <b>121</b>, and inputs the current speed from the current speed calculator <b>102</b>. The speed error calculator <b>123</b> generates a speed error as a difference between the input current speed and the input target speed, and outputs the speed error to the automatic controller <b>124</b>. </p>
<p id="p-0075" num="0074"> The automatic controller <b>124</b> inputs the speed error from the speed error calculator <b>123</b>, calculates a drive output of the drive motor <b>200</b>, and outputs the drive output to the drive motor <b>200</b>. </p>
<p id="p-0076" num="0075"> The positioning controlling apparatus according to the second embodiment constitutes a general closed-loop speed controlling apparatus, except the position difference determining unit <b>125</b> and the speed error calculator <b>123</b>, as is well known to those skilled in the art. </p>
<p id="p-0077" num="0076"> Each unit that constitutes the positioning controlling apparatus <b>12</b> can be configured by programming a general-purpose computer or a general-purpose digital signal processor (DSP). </p>
<p id="p-0078" num="0077"> Operation of the paper conveying apparatus <b>2</b> that uses the positioning controlling apparatus <b>12</b> according to the second embodiment is explained next. The target speed calculator <b>121</b> calculates a target speed at each time, using a control starting time as a basis, a moving distance as a current moving amount of the belt, and a current speed. When the conveyor belt <b>301</b> is in an area outside the positioning control area, the target speed calculator <b>121</b> uses a target speed generation algorithm having substantially a trapezoidal shape as shown in <figref idref="DRAWINGS">FIG. 2</figref>, for a target speed generation method, similarly to the first embodiment. </p>
<p id="p-0079" num="0078"> In the target speed generation algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref>, time in the lateral axis shows a sampling time since it is a digital control. In this target speed generation algorithm, the target speed calculator <b>121</b> accelerates a target speed at an equal acceleration rate from the control starting time till a predetermined time t<b>1</b>, and switches the acceleration to an equal-speed control upon reaching a predetermined speed v<b>2</b>. Thereafter, the target speed is subjected to a deceleration control expressed by a function of a moving distance, when the moving distance reaches a predetermined level (p<b>3</b>). The target speed is controlled at an equal-speed again when the current speed reaches v<b>4</b>. When the moving distance reaches a predetermined level p<b>5</b>, the target speed is again subjected to a deceleration control expressed by a function of the moving distance. When the moving distance reaches p<b>6</b>, a position control mode starts, and this mode continues thereafter. The area indicated by time after the position p<b>6</b> is a positioning control area. Since the positioning control area is the same as that explained in the first embodiment, explanation thereof is omitted. </p>
<p id="p-0080" num="0079"> The position determining unit <b>100</b> determines whether the moving distance has reached the positioning control area, based on the moving distance detected by the moving distance detector <b>500</b>. </p>
<p id="p-0081" num="0080"> In the positioning control area, the gain input from the gain switch <b>126</b> is multiplied to a difference between the target speed and the current speed to obtain a target speed, thereby performing the speed control. The current speed calculator <b>102</b> obtains the current speed of the conveyor belt <b>301</b>, based on the difference between adjacent sampling times of the moving distance input from the moving distance detector <b>500</b>. </p>
<p id="p-0082" num="0081"> The speed error calculator <b>123</b> calculates a difference between the target speed generated by the target speed calculator <b>121</b> and the current speed generated by the current speed calculator <b>102</b>, and outputs the speed error. </p>
<p id="p-0083" num="0082"> The position difference determining unit <b>125</b> determines the gain as positive when the difference between the input current position and the target position is in an overshoot state, determines the gain as negative when the difference is not in the overshoot state, and outputs a result of the determination to the gain switch <b>126</b>. </p>
<p id="p-0084" num="0083"> The gain switch <b>126</b> holds plural different gains, selects a corresponding gain following the input determination result among plural gains, and outputs the selected gain to the target speed calculator <b>121</b>. For example, the gain switch <b>126</b> holds two gains of g<b>1</b> and g<b>2</b> (g<b>1</b>&#x3c;g<b>2</b>). When the input determination result is negative, that is, not in the overshoot state, torque returning from twist is applied. Therefore, g<b>1</b> having a relatively small value is selected. When the input determination result is positive, that is, in the overshoot state, torque corresponding to the torque returning from twist needs to be applied. Therefore, g<b>2</b> having a relatively large value is selected. </p>
<p id="p-0085" num="0084"> The automatic controller <b>124</b> calculates the output of the drive motor <b>200</b> using a predetermined control calculation, following the speed error input from the speed error calculator <b>123</b>, even when the conveyor belt <b>301</b> is within or outside the positioning control area. The automatic control calculation includes the P control, the PI control, the PID control, and the state feedback control. Among the controls, while a stable control result can be obtained by the PI control, the control is not limited to this method. </p>
<p id="p-0086" num="0085"> <figref idref="DRAWINGS">FIG. 5</figref> is a flowchart of a positioning control procedure according to the second embodiment. The position determining unit <b>100</b> determines whether a moving position of the conveyor belt <b>301</b> is in the positioning control area (step S<b>201</b>). When it is determined that a moving position of the conveyor belt <b>301</b> is not in the positioning control area (step S<b>201</b>: No), the target speed calculator <b>121</b> calculates a target speed in the area outside the positioning control area, based on the algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref> (step S<b>202</b>). The state that the conveyor belt <b>301</b> is not in the control area is the state before the position p<b>6</b> in <figref idref="DRAWINGS">FIG. 2</figref>. </p>
<p id="p-0087" num="0086"> When the current speed calculator <b>102</b> calculates the current speed (step S<b>203</b>), the speed error calculator <b>123</b> calculates an error between the calculated target speed and the calculated current speed (step S<b>204</b>). Since the conveyor belt <b>301</b> is not in the positioning area in this case, a simple calculation for speed error is performed following the algorithm shown in <figref idref="DRAWINGS">FIG. 2</figref>, without switching between the gains. </p>
<p id="p-0088" num="0087"> The automatic controller <b>124</b> controls and drives the drive roller <b>200</b> following the speed error calculated by the speed error calculator <b>123</b>, thereby performing controller process (step S<b>205</b>). As explained above, when the conveyor belt <b>301</b> is in the area outside the positioning control area, the speed error is calculated from a target speed obtained by using the algorithm as a speed characteristic determined using a lapse time as a variable, thereby controlling the drive roller. In the area outside the positioning control area, the conveyor belt <b>301</b> is quickly brought to the positioning control area near the stop area, without fine adjustment of the speed. </p>
<p id="p-0089" num="0088"> On the other hand, when the position determining unit <b>100</b> determines that the moving position of the conveyor belt <b>301</b> is in the positioning control area (step S<b>201</b>: Yes), that is, when and after it is determined that the conveyor belt <b>301</b> has moved to the position p<b>6</b> in <figref idref="DRAWINGS">FIG. 2</figref>, fine positioning process is started. First, the position difference determining unit <b>125</b> calculates a difference between the target position and the current position of the conveyor belt <b>301</b> (step S<b>206</b>). The difference between the positions is calculated, from the moving distance detected by the moving distance detector <b>500</b>. </p>
<p id="p-0090" num="0089"> The position difference determining unit <b>125</b> determines whether the calculated difference is a positive value corresponding to the rotation direction of the drive roller <b>302</b> (step S<b>207</b>). When it is determined that the calculated difference is a positive value (step S<b>207</b>: Yes), that is, when the position difference determining unit <b>125</b> determines that the conveyor belt <b>301</b> is in the same direction as that set as a sub-scan direction, the gain switch <b>126</b> switches the gain to the positive gain (step S<b>208</b>). The target speed calculator <b>121</b> multiplies the positive gain to the calculated position difference, thereby obtaining a target speed (step S<b>209</b>). </p>
<p id="p-0091" num="0090"> The current speed calculator <b>102</b> calculates the current speed (step S<b>203</b>). The speed error calculator <b>123</b> calculates an error between the current speed and the target speed (step S<b>204</b>). The automatic controller <b>124</b> controls and drives the drive roller <b>200</b> following the speed difference, and controls the conveyor belt <b>301</b> (step S<b>205</b>). </p>
<p id="p-0092" num="0091"> On the other hand, when the position difference determining unit <b>125</b> determines that the calculated difference is not a positive value corresponding to the rotation direction of the drive roller <b>302</b> (step S<b>207</b>: No), that is, when it is determined that the conveyor belt <b>301</b> is in the direction opposite to that set as a sub-scan direction, the gain switch <b>126</b> switches the gain to the negative gain (step S<b>210</b>). The target speed calculator <b>121</b> multiplies the negative gain to the calculated position difference, thereby obtaining a target speed (step S<b>211</b>). </p>
<p id="p-0093" num="0092"> The current speed calculator <b>102</b> calculates the current speed (step S<b>203</b>), and the speed error calculator <b>123</b> calculates an error between the calculated target speed and the calculated current speed (step S<b>204</b>). The automatic controller <b>124</b> controls and drives the drive roller <b>200</b> following the speed error, thereby performing controller process (step S<b>205</b>). </p>
<p id="p-0094" num="0093"> In the configuration described above, while the position difference determining unit <b>125</b> determines the moving direction of the conveyor belt <b>301</b>, the moving direction can be also determined by inputting positive and negative sign information of the moving speed calculated by the current speed calculator <b>102</b>. With this arrangement, the current speed calculator <b>102</b> can perform the function of the position difference determining unit <b>125</b>. </p>
<p id="p-0095" num="0094"> A prescribed gain can be also obtained based on an absolute value of the difference, as well as based on the positive or negative sign of the difference. A finer gain switch becomes possible. </p>
<p id="p-0096" num="0095"> As explained above, the positioning controlling apparatus according to the second embodiment has a gain switch that switches the gain, based on a difference between the current position and the target position. With this arrangement, the position of the conveyor belt <b>301</b> can be converged to a target position stably and promptly. </p>
<p id="p-0097" num="0096"> <figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of a hardware configuration of an inkjet printer. This inkjet printer is constituted as a multifunction product having multifunction of a facsimile, a scanner, and the like. As shown in <figref idref="DRAWINGS">FIG. 7</figref>, this inkjet printer has a controller <b>1210</b> and an engine <b>1260</b> connected together via a peripheral component interconnect (PCI) bus. The controller <b>1210</b> performs total control of the inkjet printer and controls inputs from an FCU (Facsimile Control Unit) I/F<b>1230</b> and an operating unit <b>1220</b>, including display process by a display unit, various controls by a control unit, and image formation by an image forming unit. The engine <b>1260</b> is an image processing engine that can be connected to the PCI bus, and includes an image process such as error diffusion and gamma conversion of obtained image data. </p>
<p id="p-0098" num="0097"> The controller <b>1210</b> has a CPU <b>1211</b>, a north bridge (NB) <b>1213</b>, a system memory (MEM-P) <b>1212</b>, a south bridge (SB) <b>1214</b>, a local memory (MEM-C) <b>1217</b>, an application specific integrated circuit (ASIC) <b>1216</b>, and a hard disk drive <b>1218</b>. The north bridge <b>1213</b> and the ASIC <b>1216</b> are connected together via an accelerated graphics port (AGP) bus <b>1215</b>. The MEM-P <b>1212</b> has a read only memory (ROM) <b>1212</b><i>a</i>, and a random access memory (RAM) <b>1212</b><i>b. </i></p>
<p id="p-0099" num="0098"> The CPU <b>1211</b> performs total control of the inkjet printer, has a chip set consisting of the NB <b>1213</b>, the MEM-P <b>1212</b>, and the SB <b>1214</b>, and is connected to other devices via this chip set. </p>
<p id="p-0100" num="0099"> The NB <b>1213</b> is a bridge for connecting the CPU <b>1211</b> to the MEM-P <b>1212</b>, the SB <b>1214</b>, and the AGP <b>1215</b>, and has a memory controller that controls reading and writing to the MEM-P <b>1212</b>, a PCI master, and an AGP target. </p>
<p id="p-0101" num="0100"> The MEM-P <b>1212</b> is a system memory that is used as a storage memory of a program and data, and as a development memory of a program and data, and consists of the ROM <b>1212</b><i>a </i>and the RAM <b>1212</b><i>b</i>. The ROM <b>1212</b><i>a </i>is used as a storage memory of a program and data. The RAM <b>1212</b><i>b </i>is a readable and writable memory that is used as a development memory of a program and data, and an image drawing memory at the image processing time. </p>
<p id="p-0102" num="0101"> The SB <b>1214</b> is a bridge that connects between the NB <b>1213</b>, the PCI device, and a peripheral device. This SB <b>1214</b> is connected to the NB <b>1213</b> via the PCI bus. The PCI bus is also connected to the FCUI/F <b>1230</b> and the like. </p>
<p id="p-0103" num="0102"> The ASIC <b>1216</b> is an integrated circuit (IC) for multimedia information process having a hardware element for multimedia information process, and functions as a bridge that connects the AGP <b>1215</b>, the PCI bus, the HDD <b>1218</b>, and the MEM-C <b>1217</b>. </p>
<p id="p-0104" num="0103"> The ASIC <b>1216</b> is connected to a universal serial bus (USB) <b>1240</b> and the Instituted of Electrical and Electronics Engineers (IEEE) <b>1394</b> interface <b>1250</b> via the PCI bus, among a PCI target and an AGP master, an arbiter (ARB) that forms a core of the ASIC <b>1216</b>, the memory controller that controls the MEM-C <b>1217</b>, plural direct memory access controllers (DMAC) that rotate image data based on a hardware logic and the like, and an engine <b>1060</b>. </p>
<p id="p-0105" num="0104"> The MEM-C <b>1217</b> is a local memory that is used as a transmission image buffer and a code buffer. The HDD <b>1218</b> is a storage that stores image data, a program, font data, and a form. </p>
<p id="p-0106" num="0105"> The AGP <b>1215</b> is a bus interface for a graphics accelerator card that is proposed to increase the graphic processing speed. The AGP <b>1215</b> directly accesses the MEM-P <b>1212</b> in high throughput, thereby increasing the speed of the graphics accelerator card. </p>
<p id="p-0107" num="0106"> The keyboard <b>1220</b> that is connected to the ASIC <b>1216</b> receives an operation input from an operator, and transmits received operation input information to the ASIC <b>1216</b>. </p>
<p id="p-0108" num="0107"> The positioning control program to be executed by the inkjet printer according to this embodiment can be provided by being installed in the ROM or the like in advance. </p>
<p id="p-0109" num="0108"> The positioning control program to be executed by the inkjet printer according to this embodiment can be provided by being recorded in a computer-readable recording medium such as a CD-ROM, a flexible disk (FD), a CD-R, and a digital versatile disk (DVD), in an installable format file or an executable format file. </p>
<p id="p-0110" num="0109"> The positioning control program to be executed by the inkjet printer according to this embodiment can be provided by being stored in a computer connected to a network like the Internet, and downloaded via the network. The positioning control program to be executed by the inkjet printer according to this embodiment can be provided or distributed via the network such as the Internet. </p>
<p id="p-0111" num="0110"> The positioning control program to be executed by the inkjet printer according to this embodiment has a module configuration including the units described above (the position determining unit <b>100</b>, the target speed calculator <b>101</b>, the current speed calculator <b>102</b>, the speed error calculator <b>103</b>, the automatic controller <b>104</b>, the speed determining unit <b>105</b>, and the gain switch <b>106</b>). As actual hardware, a CPU (processor) reads the positioning control program from the ROM, and executes this program to load each unit in the main storage device. Consequently, the position determining unit <b>100</b>, the target speed calculator <b>101</b>, the current speed calculator <b>102</b>, the speed error calculator <b>103</b>, the automatic controller <b>104</b>, the speed determining unit <b>105</b>, and the gain switch <b>106</b> are generated in the main storage device. </p>
<p id="p-0112" num="0111"> Above embodiments and modifications of the present invention are only examples for explanation of the invention and the present invention is not limited to the specific examples explained above. </p>
<p id="p-0113" num="0112"> According to the present invention, there is provided a positioning controlling apparatus that controls a stop position of a conveyor of a conveying apparatus having a driving unit that includes and drives a rotation axis and the conveyor that conveys a conveyed object carrying thereon based on rotation of the rotation axis. A moving distance detector measures a moving distance of the conveyor. A current speed calculator calculates a current speed of the conveyor, from a moving distance. A position determining unit determines whether the conveyor is in a positioning area, from a moving distance. A gain switch switches between gains to be used to calculate a target speed, when the position determining unit determines that the conveyor is in the positioning area. A target speed calculator calculates a target speed of the conveyor based on the gain obtained by switching between the gains. A speed error calculator calculates an error between a target speed and a current speed. A controller controls the driving unit, by using a speed error. With this configuration, the positioning controlling apparatus controls the position of the conveyor in the positioning area while switching between the gains based on the moving speed of the conveyor. Therefore, stable and prompt convergence to a target position is made possible. </p>
<p id="p-0114" num="0113"> According to the present invention, gains are switched following the calculated current speed. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the calculated moving speed of the conveyor. Therefore, stable and prompt convergence to a target position is made possible. </p>
<p id="p-0115" num="0114"> According to the present invention, a moving direction determining unit determines a moving direction of the conveyor when the position determining unit determines that the conveyor is in the positioning area. The gain switch switches the gain to a corresponding gain following a determined moving direction. With this configuration, the positioning controlling apparatus controls the position of the conveyor in the positioning area while switching between the gains based on the determined moving direction of the conveyor. Therefore, stable and prompt convergence to a target position is made possible. </p>
<p id="p-0116" num="0115"> According to the present invention, the moving direction determining unit determines the moving direction, based on a calculated current speed. With this configuration, the positioning controlling apparatus controls the position of the conveyor in the positioning area while switching between the gains based on the calculated current speed of the conveyor. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0117" num="0116"> According to the present invention, the gain switch sets and switches the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction of a conveyed object set based on a current speed of the conveyor, to a value smaller than the gain obtained when the moving direction of the conveyor is calculated to be an opposite direction. With this configuration, when the moving direction of the conveyor is the same as the moving direction of the twist of torque, the twist of the torque can be used, in the positioning area. When the moving direction of the conveyor is opposite to the moving direction of the twist of torque, the positioning controlling apparatus controls the position while switching between the gains so as to increase the gain against the twist. Therefore, secure, stable, and prompt convergence to a target position is made possible. </p>
<p id="p-0118" num="0117"> According to the present invention, a difference determining unit determines a difference between a target position and a current position, based on a moving distance of the conveyor. The gain switch switches between the gains, following a determined difference. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains, based on a difference between the target position and the current position of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is made possible. </p>
<p id="p-0119" num="0118"> According to the present invention, the difference determining unit determines whether a moving direction of the conveyor is the same as a set moving direction of a conveyed object or an opposite moving direction. The gain switch switches between the gains following a determined moving direction. With this configuration, the positioning controlling apparatus controls the position of the conveyor, while switching between the gains based on the moving direction of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0120" num="0119"> According to the present invention, the gain switch sets the gain obtained when the moving direction of the conveyor is determined to be the same as the moving direction of a conveyed object set based on a speed of the conveyer, to a value smaller than the gain obtained when the moving direction of the conveyor is determined to be the opposite direction, and outputs the obtained gain while switching between the gains. With this configuration, when the moving direction of the conveyor is the same as the moving direction of the twist of torque, the twist of the torque can be used, in the positioning area. When the moving direction of the conveyor is opposite to the moving direction of the twist of torque, the positioning controlling apparatus controls the position while switching between the gains so as to increase the gain against the twist. Therefore, secure, stable, and prompt convergence to a target position is possible. </p>
<p id="p-0121" num="0120"> According to the present invention, there is provided a positioning control method for a positioning controlling apparatus that controls a stop position of a conveyor of a conveying apparatus having a driving unit that includes and drives a rotation axis and the conveyor that conveys a conveyed object based on rotation of the rotation axis. A moving distance of the conveyor is measured at a moving distance detecting step. A current speed of the conveyor is calculated at a current speed calculating step, from a moving distance of the conveyor. Whether the conveyor is in a positioning area is determined at a position determining step, from a moving distance. Gains to be used to calculate a target speed is switched at a gain switching step, when it is determined at the position determining step that the conveyor is in the positioning area. A target speed of the conveyor is calculated at a target speed calculating step based on the gain obtained by switching between the gains. An error between a target speed and a current speed is calculated at a speed error calculating step. The driving unit is controlled at a control step, by using a speed error. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the moving speed of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0122" num="0121"> According to the present invention, gains are switched following the calculated current speed. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the calculated moving speed of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0123" num="0122"> According to the present invention, a moving direction determining unit determines a moving direction of the conveyor when the position determining unit determines that the conveyor is in the positioning area. The gain switch switches the gain to a corresponding gain following a determined moving direction. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the determined moving direction of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0124" num="0123"> According to the present invention, the moving direction determining unit determines the moving direction, based on a calculated current speed. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the calculated current speed of the conveyor. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0125" num="0124"> According to the present invention, the gain switch sets and switches the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction if a conveyed object set based on a current speed of the conveyor, to a value smaller than the gain obtained when the moving direction of the conveyor is calculated to be the opposite direction. With this configuration, when the moving direction of the conveyor is the same as the moving direction of the twist of torque, the twist of the torque can be used, in the positioning area. When the moving direction of the conveyor is opposite to the moving direction of the twist of torque, the positioning controlling apparatus controls the position while switching between the gains so as to increase the gain against the twist. Therefore, secure, stable, and prompt convergence to a target position is possible. </p>
<p id="p-0126" num="0125"> According to the present invention, a difference determining unit determines a difference between a target position and a current position, based on a moving distance of the conveyor. The gain switch switches between the gains, following a determined difference. With this configuration, the positioning controlling apparatus controls the position of the conveyor, based on a difference between the target position and the current position of the conveyor while switching between the gains, in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0127" num="0126"> According to the present invention, the difference determining unit determines whether a moving direction of the conveyor is the same as a set moving direction of a conveyed object or an opposite moving direction. The gain switch switches between the gains following a determined moving direction. With this configuration, the positioning controlling apparatus controls the position of the conveyor, while switching between the gains based on the moving direction of the conveyor in the positioning area. Therefore, stable and prompt convergence to a target position is possible. </p>
<p id="p-0128" num="0127"> According to the present invention, the gain switch sets and switches the gain obtained when the moving direction of the conveyor is determined to be the same as the set moving direction of the conveyed object, to a value smaller than the gain obtained when the moving direction of the conveyor is determined to be the opposite direction, and outputs the obtained gain while switching between the gains. With this configuration, when the moving direction of the conveyor is the same as the moving direction of the twist of torque, the twist of the torque can be used, in the positioning area. When the moving direction of the conveyor is opposite to the moving direction of the twist of torque, the positioning controlling apparatus controls the position while switching between the gains so as to increase the gain against the twist. Therefore, secure, stable, and prompt convergence to a target position is possible. </p>
<p id="p-0129" num="0128"> According to the present invention, there is provided a computer-readable recording medium that stores therein a computer program that causes a computer to execute the positioning control method. </p>
<p id="p-0130" num="0129"> According to the present invention, there is provided an image forming apparatus for a positioning controlling apparatus that controls a stop position of a conveyor of a conveying apparatus having a driving unit that includes and drives a rotation axis and the conveyor that conveys a conveyed object based on rotation of the rotation axis. A moving distance detector measures a moving distance of the conveyor. A current speed calculator calculates a current speed of the conveyor, from a moving distance. A position determining unit determines whether the conveyor is in a positioning area, from a moving distance. A gain switch switches between gains to be used to calculate a target speed, when the position determining unit determines that the conveyor is in the positioning area. A target speed calculator calculates a target speed of the conveyor based on the gain obtained by switching between the gains. A speed error calculator calculates an error between a target speed and a current speed. A controller controls the driving unit, by using a speed error. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the moving speed of the conveyor in the positioning area. Therefore, an image forming apparatus that can stably and promptly converge the position of the conveyor to a target position and can perform high-quality image process can be provided. </p>
<p id="p-0131" num="0130"> According to the present invention, gains are switched following the calculated current speed. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the calculated moving speed of the conveyor. Therefore, an image forming apparatus that can stably and promptly converge the position of the conveyor to a target position and can perform high-quality image process can be provided. </p>
<p id="p-0132" num="0131"> According to the present invention, a moving direction determining unit determines a moving direction of the conveyor when the position determining unit determines that the conveyor is in the positioning area. The gain switch switches the gain to a corresponding gain following a determined moving direction. With this configuration, the positioning controlling apparatus controls the position of the conveyor while switching between the gains based on the determined moving direction of the conveyor in the positioning area. Therefore, an image forming apparatus that can stably and promptly converge the position of the conveyor to a target position and can perform high-quality image process can be provided. </p>
<p id="p-0133" num="0132"> According to the present invention, there is provided a recording medium that stores the program according to the invention, in a computer-readable state. </p>
<p id="p-0134" num="0133"> Although the invention has been described with respect to a specific embodiment for a complete and clear disclosure, the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth. </p>
<?detailed-description description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is: </us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text><b>1</b>. A positioning controlling apparatus that controls a stop position of a conveyor of a conveying apparatus, said conveying apparatus having a driving unit that drives a rotation axis and the conveyor that conveys a conveyed object based on rotation of the rotation axis driven by the driving unit, the positioning controlling apparatus comprising: 
<claim-text>a moving distance detector that measures a moving distance of the conveyor; </claim-text>
<claim-text>a current speed calculator that calculates a current speed of the conveyor, from a moving distance detected by the moving distance detector; </claim-text>
<claim-text>a position determining unit that determines whether the conveyor is in a positioning area for determining the stop position, from the moving distance detected by the moving distance detector; </claim-text>
<claim-text>a target speed calculator that inputs a gain to be multiplied to a current speed calculated by the current speed calculator, and calculates a target speed of the conveyor; </claim-text>
<claim-text>a gain switch that has a plurality of the gains to be used by the target speed calculator, and outputs a gain to the target speed calculator while switching between the gains, when the position determining unit determines that the conveyor is in the positioning area; </claim-text>
<claim-text>a speed error calculator that calculates an error between a target speed calculated by the target speed calculator and a current speed calculated by the current speed calculator; and </claim-text>
<claim-text>a controller that controls the driving unit, by using a speed error calculated by the speed error calculator. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00002" num="00002">
<claim-text><b>2</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein 
<claim-text>the gain switch outputs a gain while switching between the gains following a current speed calculated by the current speed calculator. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00003" num="00003">
<claim-text><b>3</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a moving direction determining unit that determines a moving direction of the conveyor when the position determining unit determines that the conveyor is in the positioning area, wherein 
<claim-text>the gain switch outputs a gain while switching the gain to a corresponding gain following a moving direction determined by the moving direction determining unit. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00004" num="00004">
<claim-text><b>4</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein 
<claim-text>the moving direction determining unit determines the moving direction, based on a current speed calculated by the current speed calculator. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00005" num="00005">
<claim-text><b>5</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein 
<claim-text>the gain switch sets the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction of the conveyed object set based on a current speed of the conveyor calculated by the current speed calculator, to a value smaller than a gain obtained when the moving direction of the conveyor is calculated to be the opposite direction, and outputs an obtained gain while switching between the gains. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00006" num="00006">
<claim-text><b>6</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a difference determining unit that determines a difference between a target position and a current position, based on a moving distance of the conveyor detected by the moving distance detector, wherein 
<claim-text>the gain switch outputs a gain while switching between the gains following a difference determined by the difference determining unit. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00007" num="00007">
<claim-text><b>7</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein 
<claim-text>the difference determining unit determines whether a moving direction of the conveyor is the same as a set moving direction of the conveyed object or an opposite moving direction, and </claim-text>
<claim-text>the gain switch outputs a gain while switching between the gains following a moving direction determined by the difference determining unit. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00008" num="00008">
<claim-text><b>8</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein 
<claim-text>the gain switch sets the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction of the conveyed object set based on a current speed of the conveyor determined by the difference determining unit, to a value smaller than a gain obtained when the moving direction of the conveyor is determined to be the opposite direction, and outputs the obtained gain while switching between the gains. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00009" num="00009">
<claim-text><b>9</b>. A positioning controlling method for controlling a stop position of a conveyor, which carries an object to be conveyed and is moved based on rotation of a rotation axis driven by a driving unit, the positioning controlling method comprising: 
<claim-text>detecting a moving distance of the conveyor; </claim-text>
<claim-text>calculating a current speed of the conveyor, from a moving distance obtained at the detecting; </claim-text>
<claim-text>determining whether the conveyor is in a positioning area for determining the stop position, from a moving distance obtained at the detecting; </claim-text>
<claim-text>calculating a target speed of the conveyor by inputting a gain to be multiplied to a current speed obtained at the calculating of a current speed; </claim-text>
<claim-text>outputting a gain to be used at the calculating of a target speed while switching between a plurality of gains, when the conveyor is determined to be in the positioning area at the determining, by selecting one of the plurality of gains; </claim-text>
<claim-text>calculating an error between a target speed obtained at the calculating of a target speed and a current speed obtained at the calculating of a current speed; and </claim-text>
<claim-text>controlling the driving unit, by using a speed error obtained at the calculating of a speed error. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00010" num="00010">
<claim-text><b>10</b>. The positioning controlling method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein 
<claim-text>the outputting a gain is performed while switching between a plurality of gains following a current speed obtained at the calculating of a current speed. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00011" num="00011">
<claim-text><b>11</b>. The positioning controlling method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising determining a moving direction of the conveyor when it is determined at the determining of a position that the conveyor is in the positioning area, wherein 
<claim-text>the outputting a gain is performed while switching between a plurality of gains to a corresponding gain following a moving direction determined at the determining of a moving direction. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00012" num="00012">
<claim-text><b>12</b>. The positioning controlling method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein 
<claim-text>The determining of a moving direction is conducted based on a current speed obtained at the calculating of a current speed. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00013" num="00013">
<claim-text><b>13</b>. The positioning controlling method according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein 
<claim-text>the outputting a gain while switching between the gains includes setting the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction of the conveyed object set based on a current speed of the conveyor obtained at the calculating of a current speed, to a value smaller than a gain obtained when the moving direction of the conveyor is calculated to be the opposite direction. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00014" num="00014">
<claim-text><b>14</b>. The positioning controlling method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising determining a difference between a target position and a current position, based on a moving distance of the conveyor obtained at the detecting of a moving distance, wherein 
<claim-text>the outputting a gain is performed while switching between a plurality of gains following a difference determined at the determining of a difference. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00015" num="00015">
<claim-text><b>15</b>. The positioning controlling method according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein 
<claim-text>the determining is performed to determine whether a moving direction of the conveyor is the same as a set moving direction of the conveyed object or an opposite moving direction, and </claim-text>
<claim-text>the outputting a gain is performed while switching between a plurality of gains following a moving direction determined at the determining of a difference. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00016" num="00016">
<claim-text><b>16</b>. The positioning controlling method according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein 
<claim-text>the outputting a gain while switching between the gains includes setting the gain obtained when the moving direction of the conveyor is calculated to be the same as the moving direction of the conveyed object set based on a current speed of the conveyor determined at the determining of a difference, to a value smaller than a gain obtained when the moving direction of the conveyor is determined to be the opposite direction. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00017" num="00017">
<claim-text><b>17</b>. A computer-readable recording medium that stores therein a computer program that causes a computer to execute a positioning controlling method for controlling a stop position of a conveyor, which carries thereon an object to be conveyed and is moved based on rotation of a rotation axis driven by a driving unit, said positioning controlling method comprising: 
<claim-text>detecting a moving distance of the conveyor; </claim-text>
<claim-text>calculating a current speed of the conveyor, from a moving distance obtained at the detecting; </claim-text>
<claim-text>determining whether the conveyor is in a positioning area for determining the stop position, from a moving distance obtained at the detecting; </claim-text>
<claim-text>calculating a target speed of the conveyor by inputting a gain to be multiplied to a current speed obtained at the calculating of a current speed; </claim-text>
<claim-text>outputting a gain to be used at the calculating of a target speed while switching between a plurality of gains, when the conveyor is determined to be in the positioning area at the determining, by selecting one of the plurality of gains; </claim-text>
<claim-text>calculating an error between a target speed obtained at the calculating of a target speed and a current speed obtained at the calculating of a current speed; and </claim-text>
<claim-text>controlling the driving unit, by using a speed error obtained at the calculating of a speed error. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00018" num="00018">
<claim-text><b>18</b>. An image forming apparatus that includes an image processing apparatus that inputs image information and processes the input image, an image output apparatus that outputs an image on recording paper following image information obtained by the image process performed by the image processing apparatus, a conveying apparatus having a driving unit that drives a rotation axis, and a conveyor that conveys the recording paper based on rotation of the rotation axis driven by the driving unit, and a positioning controlling apparatus that controls the conveying apparatus to convey the recording paper to a position where the image output apparatus outputs an image on the recording paper, wherein 
<claim-text>the positioning controlling apparatus comprises: </claim-text>
<claim-text>a moving distance detector that measures a moving distance of the conveyor; </claim-text>
<claim-text>a current speed calculator that calculates a current speed of the conveyor, from a moving distance detected by the moving distance detector; </claim-text>
<claim-text>a position determining unit that determines whether the conveyor is in a positioning area for determining a stop position, from the moving distance detected by the moving distance detector; </claim-text>
<claim-text>a target speed calculator that inputs a gain to be multiplied to a current speed calculated by the current speed calculator, and calculates a target speed of the conveyor; </claim-text>
<claim-text>a gain switch that has a plurality of the gains to be used by the target speed calculator, and outputs a gain to the target speed calculator while switching between the gains, when the position determining unit determines that the conveyor is in the positioning area; </claim-text>
<claim-text>a speed error calculator that calculates an error between a target speed calculated by the target speed calculator and a current speed calculated by the current speed calculator; and </claim-text>
<claim-text>a controller that controls the driving unit, by using a speed error obtained by the speed error calculator. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00019" num="00019">
<claim-text><b>19</b>. The image forming apparatus according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein 
<claim-text>the gain switch outputs a gain while switching between the gains following a current speed calculated by the current speed calculator. </claim-text>
</claim-text>
 </claim>
<claim id="CLM-00020" num="00020">
<claim-text><b>20</b>. The positioning controlling apparatus according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising a moving direction determining unit that determines a moving direction of the conveyor when the position determining unit determines that the conveyor is in the positioning area, wherein 
<claim-text>the gain switch outputs a gain while switching the gain to a corresponding gain following a moving direction determined by the moving direction determining unit.</claim-text>
</claim-text>
 </claim>
</claims>
</us-patent-application>
